# Commandes pour corriger le cache DI corrompu
# À exécuter sur le serveur iot.olution.info

# 1. Aller dans le répertoire du projet
cd /home4/oliviera/iot.olution.info/ffp3/

# 2. Supprimer complètement le cache DI
rm -rf var/cache/di/*

# 3. Recréer le dossier
mkdir -p var/cache/di
chmod -R 755 var/cache/

# 4. Vérifier la syntaxe du fichier dependencies.php
php -l config/dependencies.php

# 5. Tester l'application (ceci va régénérer le cache)
php -r "require_once 'vendor/autoload.php'; \$container = require 'config/container.php'; echo 'OK';"

# 6. Vérifier la syntaxe du cache généré
php -l var/cache/di/CompiledContainer.php

# 7. Tester le site
curl -I https://iot.olution.info/ffp3/
